<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.7.2"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="4 paquetes que debes conocer para hacer mapas en R" /><meta name="author" content="Camilo Martínez" /><meta property="og:locale" content="en_US" /><meta name="description" content="Aqui una alternativa a ArcGIS o QGIS." /><meta property="og:description" content="Aqui una alternativa a ArcGIS o QGIS." /><link rel="canonical" href="https://camartinezbu.github.io/posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/" /><meta property="og:url" content="https://camartinezbu.github.io/posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/" /><meta property="og:site_name" content="Camilo Martínez" /><meta property="og:image" content="https://camartinezbu.github.io/assets/img/posts/2021-01-17-4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/pexels-andrew-neel-2859169.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-01-17T09:45:00-05:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://camartinezbu.github.io/assets/img/posts/2021-01-17-4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/pexels-andrew-neel-2859169.jpg" /><meta property="twitter:title" content="4 paquetes que debes conocer para hacer mapas en R" /><meta name="twitter:site" content="@camartinezbu" /><meta name="twitter:creator" content="@Camilo Martínez" /><meta name="google-site-verification" content="mI98zLX_Z1qeRqSmCMc6j_S7_S1UEBSsD9K_Ld_VHl0" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Camilo Martínez"},"description":"Aqui una alternativa a ArcGIS o QGIS.","url":"https://camartinezbu.github.io/posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/","image":"https://camartinezbu.github.io/assets/img/posts/2021-01-17-4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/pexels-andrew-neel-2859169.jpg","@type":"BlogPosting","headline":"4 paquetes que debes conocer para hacer mapas en R","dateModified":"2021-01-27T08:08:05-05:00","datePublished":"2021-01-17T09:45:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://camartinezbu.github.io/posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/"},"@context":"https://schema.org"}</script><title>4 paquetes que debes conocer para hacer mapas en R | Camilo Martínez</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" href="/assets/css/post.css" as="style"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-173730939-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-173730939-1'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/sample/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Camilo Martínez</a></div><div class="site-subtitle font-italic">Un blog sobre ciencia de datos y programación.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>INICIO</span> </a><li class="nav-item"> <a href="/tabs/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORÍAS</span> </a><li class="nav-item"> <a href="/tabs/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>ETIQUETAS</span> </a><li class="nav-item"> <a href="/tabs/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVO</span> </a><li class="nav-item"> <a href="/tabs/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>SOBRE MI</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/camartinezbu" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/camartinezbu" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['camartinezbu.contacto','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="" aria-label="linkedin" class="order-6" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Publicaciones </a> </span> <span>4 paquetes que debes conocer para hacer mapas en R</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Buscar..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>4 paquetes que debes conocer para hacer mapas en R</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " > Jan 17 <i class="unloaded">2021-01-17T09:45:00-05:00</i> </span> por <span class="author"> Camilo Martínez </span></div><div> <span> Actualizado el <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Wed, Jan 27, 2021, 8:08 AM -0500" > Jan 27 <i class="unloaded">2021-01-27T08:08:05-05:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1189 palabras">6 min</span></div></div><div class="post-content"> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/2021-01-17-4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/pexels-andrew-neel-2859169.jpg" class="preview-img"><p>Así que decidiste aprender a usar R para trabajar con mapas. Esta guia te dará las herramientas básicas para que puedas hacerlo, incluyas visualizaciones de mapas en tu flujo de trabajo y te motives a hacer análisis espacial con este lenguaje.</p><h2 id="código-vs-interfaces-de-usuario">Código vs interfaces de usuario</h2><p>Antes de comenzar, lo primero que tienes que saber es que para hacer mapas en R vas a tener que escribir código. No es código muy complejo si tienes una familiaridad básica con este lenguaje de programación, pero quizás al principio tiene una curva de aprendizaje más empinada que programas como ArcGIS (o su alternativa Open Source <a href="https://qgis.org/en/site/forusers/download.html">QGIS</a>) en los que puedes interactuar a través de menús y botones con tu mouse.</p><p>Sin embargo, si ya estás trabajando en un ambiente de R, si quieres automatizar la creación de muchos mapas con estructuras de control - los bucles con <code class="language-plaintext highlighter-rouge">for</code>-, o si te gustaría incluir fácilmente tu análisis en un dashboard de <code class="language-plaintext highlighter-rouge">shiny</code>, realizar mapas de esta forma puede ser una muy buena alternativa.</p><h2 id="dónde-consigo-los-mapas">¿Dónde consigo los mapas?</h2><p>Lo primero que te puedes estar preguntando es: <em>¿Pero y dónde encuentro los mapas para trabajar?</em> Afortunadamente, en línea hay muchos repositorios de información con atributos espaciales. Aqui va una lista de enlaces que te pueden ser de utilidad para empezar.</p><h3 id="para-colombia">Para Colombia</h3><ul><li><a href="https://geoportal.dane.gov.co/servicios/descarga-y-metadatos/descarga-mgn-marco-geoestadistico-nacional/">El Marco Geoestadístico Nacional</a> del DANE contiene los polígonos del país, sus departamentos y municipios, con revisiones en 2005, 2012, 2017, 2018 y 2020.<li><a href="https://geoportal.igac.gov.co/contenido/datos-abiertos-igac">El portal de Datos Abiertos del IGAC</a> tiene información de agrología, cartografía, geodesia, entre otros.<li><a href="https://www.ideca.gov.co/buscador?topic=All&amp;metadata=All&amp;newest=All&amp;entity=All&amp;resource=All&amp;content_type=map&amp;res=true&amp;sort_by=created&amp;sort_order=DESC">El IDECA</a> tiene una gran cantidad de información para Bogotá para un gran número de temáticas: Ordenamiento Territorial, Salud, Ambiente, Seguridad, entre otros.<li><a href="https://www.medellin.gov.co/geomedellin/index.hyg">GeoMedellín</a> aloja numerosos conjuntos de información geolocalizada para Medellín, también separados por temas.</ul><h3 id="para-el-resto-del-mundo">Para el resto del Mundo</h3><ul><li>El <a href="https://gadm.org/download_country_v3.html">GADM</a> del Centro de Ciencias Espaciales de la Universidad de California, Davis tiene los shapefiles para todos los países y sus subdivisiones. Dependiendo el país que escojas habrá mayor o menor calidad de la información.</ul><p>Esta no es una lista exhaustiva de fuentes de información, así que si conoces otra fuente que creas que debe estar allí, compártemela para añadirla.</p><h2 id="el-formato-shapefile">El formato shapefile</h2><p>El formato más común con el que te vas a encontrar es el <em>shapefile</em>. Este formato es desarollado por ESRI, la compañía que creó ArcGIS, y consiste en varios archivos con extensiones <code class="language-plaintext highlighter-rouge">*.dbf</code>, <code class="language-plaintext highlighter-rouge">*.prj</code>, <code class="language-plaintext highlighter-rouge">*.sbn</code>, <code class="language-plaintext highlighter-rouge">*.sbx</code>, <code class="language-plaintext highlighter-rouge">*.shp</code>, <code class="language-plaintext highlighter-rouge">*.shx</code>, entre otros.</p><p>Para efectos prácticos, siempre que querramos importar o modificar el shapefile en R, vamos a referirnos únicamente al archivo <code class="language-plaintext highlighter-rouge">*.shp</code> y R se encargará del resto. Asímismo, es importante que <strong>no borres los archivos con las demás extensiones</strong>, dado que para que el shapefile funcione los necesitas a todos.</p><p>Eventualmente, te puedes encontrar con otros formatos como el <em>GeoPackage</em> o <em>geodatabase</em>, pero la manera de trabajar con ellos en R es my similar a la del <em>shapefile</em>.</p><h2 id="1-simple-features-sf">1. Simple Features: sf</h2><p>Simple Features es un estándar para la representación de objetos espaciales de la vida real a través de geometrías -puntos, lineas, polígonos, etc. - en los sistemas de información geográfica. El paquete <code class="language-plaintext highlighter-rouge">sf</code> implementa este estándar en R y es con el que vamos a trabajar.</p><p>En esta guía no vamos a cubrir cosas específicas como las funciones para personalizar los mapas, el sistema de coordenadas de los shapefiles u operaciones con y entre shapes. Por ahora solo vamos a importar un shape a R.</p><p>Voy a usar el mapa de las localidades de la Bogotá <a href="https://www.ideca.gov.co/recursos/mapas/localidad-bogota-dc">disponible en la página del IDECA</a> para hacer los siguiente ejemplos. Lo primero, y lo único, que vamos a hacer con <code class="language-plaintext highlighter-rouge">sf</code> será importar el shapefile. Para ello, vamos a correr el siguiente código:</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">install.packages</span><span class="p">(</span><span class="s1">'sf'</span><span class="p">)</span><span class="w"> </span><span class="c1"># Si no has instalado el paquete aún</span><span class="w">

</span><span class="n">library</span><span class="p">(</span><span class="n">sf</span><span class="p">)</span><span class="w">

</span><span class="n">mi_shape</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sf</span><span class="o">::</span><span class="n">st_read</span><span class="p">(</span><span class="s1">'Loca.shp'</span><span class="p">)</span><span class="w"> </span><span class="c1"># Debes modificar el contenido de st_read dependiendo de dónde tengas guardado el archivo.</span><span class="w">
</span></pre></table></code></div></div><p>Si todo salio bien, deberías tener un objeto en r con clase <code class="language-plaintext highlighter-rouge">sf</code>, que contiene un mapa con las localidades de Bogotá.</p><h2 id="2-ggplot2">2. ggplot2</h2><p>La primera forma de visualizar este objeto es usando el paquete <code class="language-plaintext highlighter-rouge">ggplot2</code> del <code class="language-plaintext highlighter-rouge">tidyverse</code>. Este paquete es una de las librerías más usadas para crear gráficos en R y tiene muchas opciones para ajustar cada detalle.</p><p>Visualizar un mapa en ggplot es muy sencillo. Así como tienes funciones como <code class="language-plaintext highlighter-rouge">geom_point()</code> o <code class="language-plaintext highlighter-rouge">geom_bar()</code> para crear un gráfico de puntos o un gráfico de barras, el paquete <code class="language-plaintext highlighter-rouge">sf</code> contiene una función <code class="language-plaintext highlighter-rouge">geom_sf()</code> que se enlaza con <code class="language-plaintext highlighter-rouge">ggplot2</code> y te permite visualizar el mapa.</p><p>A modo de ejemplo, el resultado del siguiente código será:</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">

</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mi_shape</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">geom_sf</span><span class="p">()</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/2021-01-17-4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/mapa_ggplot.png" alt="Mapa de las localidades de Bogotá usando ggplot2" /> <em>Mapa de las localidades de bogotá usando ggplot2</em></p><p>De aqui en adelante, puedes jugar con las opciones de temas de ggplot2, para cambiar el color de fondo, la fuente, los ejes, entre muchas otras cosas. Por ejemplo, intenta añadir al final del código anterior <code class="language-plaintext highlighter-rouge">+ theme_void()</code>. Casi cualquier configuración que funcionaría para un ggplot normal, funciona para un mapa hecho de esta forma.</p><h2 id="3-tmap">3. tmap</h2><p><code class="language-plaintext highlighter-rouge">tmap</code> es un paquete diseñado específicamente para la creación de mapas temáticos con <code class="language-plaintext highlighter-rouge">sf</code>. <code class="language-plaintext highlighter-rouge">tmap</code> tiene una sintaxis muy parecida a la de ggplot y tiene la ventaja de que no tienes que lidiar con etiquetas de los ejes, color de fondo, etc. Ya está diseñado para sacar un mapa más limpio.</p><p>Al ejecutar los siguientes comandos, tendrás como resultado:</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">library</span><span class="p">(</span><span class="n">tmap</span><span class="p">)</span><span class="w">

</span><span class="n">tm_shape</span><span class="p">(</span><span class="n">mi_shape</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">tm_polygons</span><span class="p">()</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/2021-01-17-4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/mapa_tmap.png" alt="Mapa de las localidades de Bogotá usando tmap" /> <em>Mapa de las localidades de bogotá usando tmap</em></p><p>Una vez estés familiarizado con este paquete, te recomiendo revisar el paquete <code class="language-plaintext highlighter-rouge">tmaptools</code>, que contiene algunas funciones útiles para trabajar con <code class="language-plaintext highlighter-rouge">tmap</code>.</p><h2 id="4-leaflet">4. leaflet</h2><p>Finalmente, el paquete <code class="language-plaintext highlighter-rouge">leaflet</code> ofrece una funcionalidad mucho más interesante: Interactividad. Con este paquete, puedes crear un mapa en el que podrás arrastrar, hacer zoom, definir que hace cuando haces clic o cuando pasas el mouse por encima de un polígono, entre muchas otras cosas.</p><p>Lo mejor de todo, la sintaxis es parecida a los dos métodos anteriores, por lo que construir un mapa más complejo sigue siendo muy sencillo usando <code class="language-plaintext highlighter-rouge">leaflet</code>.</p><p>Del siguiente código, resulta:</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">library</span><span class="p">(</span><span class="n">leaflet</span><span class="p">)</span><span class="w">

</span><span class="n">leaflet</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mi_shape</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">addTiles</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="c1"># Esta función añade el mapa de fondo, que peudes cambiar por muchas opciones</span><span class="w">
    </span><span class="n">addPolygons</span><span class="p">(</span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">LocNombre</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><div style="height: 30em; padding: 0; display: flex; justify-content: center;" class="htmlwidget"> <iframe src="../../assets/img/posts/2021-01-17-4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/mapa_leaflet.html" style="width: 100%; height:100%;"></iframe></div><p><em>Mapa de las localidades con leaflet</em></p><p>Una gran ventaja de trabajar con <code class="language-plaintext highlighter-rouge">leaflet</code> es que puedes integrar los mapas interactivos con tableros de visualización con <code class="language-plaintext highlighter-rouge">shiny</code>, conservando la interactividad con los usuarios. Si quieres saber cómo funciona <code class="language-plaintext highlighter-rouge">shiny</code>, revisa la introducción que hice en <a href="https://camartinezbu.github.io/posts/como-hacer-un-dashboard-en-r/">esta entrada de blog</a>.</p><h2 id="bonus-haz-el-mapa-de-las-calles-de-tu-ciudad">Bonus: Haz el mapa de las calles de tu ciudad</h2><p>Recientemente encontré <a href="https://ggplot2tutor.com/streetmaps/streetmaps/">este tutorial</a> de Christian Burkhart (<a href="https://twitter.com/ChBurkhart">@ChBurkhart</a>) en el que describe cómo hacer un mapa usando <code class="language-plaintext highlighter-rouge">osmdata</code> y <code class="language-plaintext highlighter-rouge">ggplot2</code>. Te invito a que hagas este ejercicio, que no te tomará más de 5 minutos. <a href="https://twitter.com/camartinezbu/status/1340697885042745347">Yo lo hice para Bogotá</a> y no quedó tan mal.</p><p>Con estos 4 paquetes, tienes lista una caja de herramientas para empezar a trabajar con mapas y al jugar con las opciones, podrás hacer visualizaciones profesionales y de manera muy fácil.</p><h2 id="lecturas-relacionadas">Lecturas relacionadas</h2><ul><li><a href="https://r-spatial.github.io/sf/index.html">Documentación de sf</a><li><a href="https://cran.r-project.org/web/packages/tmap/vignettes/tmap-getstarted.html">Documentación de tmap</a><li><a href="https://rstudio.github.io/leaflet/">Documentación de leaflet para R</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/r/'>R</a>, <a href='/categories/tutorial/'>Tutorial</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/mapas/" class="post-tag no-text-decoration" >mapas</a> <a href="/tags/r/" class="post-tag no-text-decoration" >r</a> <a href="/tags/leaflet/" class="post-tag no-text-decoration" >leaflet</a> <a href="/tags/sf/" class="post-tag no-text-decoration" >sf</a> <a href="/tags/ggplot/" class="post-tag no-text-decoration" >ggplot</a> <a href="/tags/tmap/" class="post-tag no-text-decoration" >tmap</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Esta publicación está autorizada bajo licencia <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> por el autor.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=4 paquetes que debes conocer para hacer mapas en R - Camilo Martínez&url=https://camartinezbu.github.io/posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=4 paquetes que debes conocer para hacer mapas en R - Camilo Martínez&u=https://camartinezbu.github.io/posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://camartinezbu.github.io/posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Actualizaciones recientes</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/mapas-de-calor-como-calendarios-en-R/">Mapas de calor como calendarios en R</a><li><a href="/posts/3-funciones-de-dplyr-que-no-sabias-que-existian/">3 funciones de dplyr que no sabías que existían</a><li><a href="/posts/estructuras-de-datos-basicas-en-python/">Estructuras de datos básicas en python</a><li><a href="/posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/">4 paquetes que debes conocer para hacer mapas en R</a></ul></div><div id="access-tags"> <span>Etiquetas populares</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/r/">r</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/dataviz/">dataviz</a> <a class="post-tag" href="/tags/ggplot/">ggplot</a> <a class="post-tag" href="/tags/leaflet/">leaflet</a> <a class="post-tag" href="/tags/mapas/">mapas</a> <a class="post-tag" href="/tags/sf/">sf</a> <a class="post-tag" href="/tags/tmap/">tmap</a> <a class="post-tag" href="/tags/arrays/">arrays</a> <a class="post-tag" href="/tags/calendar/">calendar</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contenido</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Lecturas relacionadas</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/hablemos-de-proyecciones/"><div class="card-body"> <span class="timeago small" > Jan 31 <i class="unloaded">2021-01-31T10:00:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Hablemos de proyecciones</h3><div class="text-muted small"><p> Ahora que conoces algunos paquetes para visualizar mapas, es importante que entiendas qué son las proyecciones, pues te van a servir para hacer análisis espacial más adelante. Un problema de geome...</p></div></div></a></div><div class="card"> <a href="/posts/como-hacer-un-dashboard-en-r/"><div class="card-body"> <span class="timeago small" > Aug 17, 2020 <i class="unloaded">2020-08-17T12:10:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>¿Cómo hacer un dashboard en R?</h3><div class="text-muted small"><p> Los tableros o dashboards son herramientas muy útiles para extraer conclusiones de los datos, en ocasiones más convenientes que realizar muchas gráficas en excel para luego incluirlas en una presen...</p></div></div></a></div><div class="card"> <a href="/posts/3-funciones-de-dplyr-que-no-sabias-que-existian/"><div class="card-body"> <span class="timeago small" > Feb 21 <i class="unloaded">2021-02-21T10:00:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>3 funciones de dplyr que no sabías que existían</h3><div class="text-muted small"><p> Dplyr es quizás uno de los paquetes más importantes del Tidyverse pues permite manipular dataframes fácilmente en R, a través de funciones como mutate(), select(), filter(), summarise(), arrange() ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/cuidado-con-los-decimales/" class="btn btn-outline-primary"><p>¡Cuidado con los decimales!</p></a> <a href="/posts/estructuras-de-datos-basicas-en-python/" class="btn btn-outline-primary"><p>Estructuras de datos básicas en python</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="font-italic text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> var options = { scriptUrl: '//camartinezbu.disqus.com/embed.js', disqusConfig: function() { this.page.url = 'https://camartinezbu.github.io/posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/'; this.page.identifier = '/posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/camartinezbu">Camilo Martinez</a>. <span data-toggle="tooltip" data-placement="top" title="Excepto donde se indique lo contrario, las publicaciones de este blog se encuentran autorizadas por el autor bajo Creative Commons Attribution 4.0 International (CC BY 4.0).">Algunos derechos reservados.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Etiquetas populares</h4><a class="post-tag" href="/tags/r/">r</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/dataviz/">dataviz</a> <a class="post-tag" href="/tags/ggplot/">ggplot</a> <a class="post-tag" href="/tags/leaflet/">leaflet</a> <a class="post-tag" href="/tags/mapas/">mapas</a> <a class="post-tag" href="/tags/sf/">sf</a> <a class="post-tag" href="/tags/tmap/">tmap</a> <a class="post-tag" href="/tags/arrays/">arrays</a> <a class="post-tag" href="/tags/calendar/">calendar</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://camartinezbu.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
