<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.7.2"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Hablemos de proyecciones" /><meta name="author" content="Camilo Martínez" /><meta property="og:locale" content="en_US" /><meta name="description" content="¿Te has preguntado por qué los mapas son como son?" /><meta property="og:description" content="¿Te has preguntado por qué los mapas son como son?" /><link rel="canonical" href="https://camartinezbu.github.io/posts/hablemos-de-proyecciones/" /><meta property="og:url" content="https://camartinezbu.github.io/posts/hablemos-de-proyecciones/" /><meta property="og:site_name" content="Camilo Martínez" /><meta property="og:image" content="https://camartinezbu.github.io/assets/img/posts/2021-01-31-hablemos-de-proyecciones/hero.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-01-31T10:00:00-05:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://camartinezbu.github.io/assets/img/posts/2021-01-31-hablemos-de-proyecciones/hero.jpg" /><meta property="twitter:title" content="Hablemos de proyecciones" /><meta name="twitter:site" content="@camartinezbu" /><meta name="twitter:creator" content="@Camilo Martínez" /><meta name="google-site-verification" content="mI98zLX_Z1qeRqSmCMc6j_S7_S1UEBSsD9K_Ld_VHl0" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Camilo Martínez"},"description":"¿Te has preguntado por qué los mapas son como son?","url":"https://camartinezbu.github.io/posts/hablemos-de-proyecciones/","image":"https://camartinezbu.github.io/assets/img/posts/2021-01-31-hablemos-de-proyecciones/hero.jpg","@type":"BlogPosting","headline":"Hablemos de proyecciones","dateModified":"2021-01-31T10:00:00-05:00","datePublished":"2021-01-31T10:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://camartinezbu.github.io/posts/hablemos-de-proyecciones/"},"@context":"https://schema.org"}</script><title>Hablemos de proyecciones | Camilo Martínez</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" href="/assets/css/post.css" as="style"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-173730939-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-173730939-1'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/sample/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Camilo Martínez</a></div><div class="site-subtitle font-italic">Un blog sobre ciencia de datos y programación.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>INICIO</span> </a><li class="nav-item"> <a href="/tabs/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORÍAS</span> </a><li class="nav-item"> <a href="/tabs/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>ETIQUETAS</span> </a><li class="nav-item"> <a href="/tabs/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVO</span> </a><li class="nav-item"> <a href="/tabs/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>SOBRE MI</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/camartinezbu" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/camartinezbu" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['camartinezbu.contacto','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="" aria-label="linkedin" class="order-6" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Publicaciones </a> </span> <span>Hablemos de proyecciones</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Buscar..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Hablemos de proyecciones</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " > Jan 31 <i class="unloaded">2021-01-31T10:00:00-05:00</i> </span> por <span class="author"> Camilo Martínez </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1195 palabras">6 min</span></div></div><div class="post-content"> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/2021-01-31-hablemos-de-proyecciones/hero.jpg" class="preview-img"><p>Ahora que conoces <a href="https://camartinezbu.github.io/posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/">algunos paquetes para visualizar mapas</a>, es importante que entiendas qué son las proyecciones, pues te van a servir para hacer análisis espacial más adelante.</p><h2 id="un-problema-de-geometría">Un problema de geometría</h2><p>Puede parecer obvio lo que voy a decir, pero la tierra es un objeto tridimensional que podemos aproximar matemáticamente a través de un <a href="https://es.wikipedia.org/wiki/Geoide">geoide</a>. Las ubicaciones en la superficie de este geoide se suelen describir con latidudes y longitudes, que representan las direcciones Norte/Sur y Este/Oeste, tomando como referencia la línea del Ecuador y el Meridiano de Greenwich.</p><p>Ahora bien, no siempre tenemos a nuestra disposición un modelo tridimensional del globo para acercarnos lo más posible a la ubicación de un elemento en su superficie. En general usamos mapas para este propósito, pero eso introduce una dificutad y es que tenemos que transformar las ubicaciones de esta superficie a un plano. Este no es un asunto menor.</p><p>En el <em>Theorema Egregium</em>, el matemático Carl Friederich Gauss probó que la superficie de una esfera no se puede representar en un plano sin distorsión. En la práctica, esto quiere decir que cuando hacemos un mapa en un plano, no necesariamente se van a conservar todas sus propiedades como el área, la forma, la dirección, la distancia, entre otras.</p><h2 id="las-proyecciones">Las proyecciones</h2><p>No hay una única forma de transformar las ubicaciones en la superficie de la tierra en un plano. De hecho, hay una gran cantidad de proyecciones distintas que buscan preservar alguno de los atributos descritos con anterioridad y que, según el internet, dicen <a href="https://xkcd.com/977/">cosas sobre nuestra personalidad</a>.</p><p>En vez de pegar imágenes de las proyecciones, que puedes encontrar fácilmente en linea, para este post quiero dibujar algunas proyecciones en R usando el paquete <code class="language-plaintext highlighter-rouge">sf</code>. Primero veamos las proyecciones y luego te enseñaré cómo hacer estos mapas.</p><p>La lista de proyecciones que te voy a mostrar no es para nada exhaustiva y así como existen sistemas de coordenadas para el mundo, los hay para paises e incluso ciudades.</p><h3 id="mercator">Mercator</h3><p>La proyección lleva el nombre del cartógrafo Gerardus Mercator y probablemente sea esta la que te imagines cuando pienses en un mapa del mundo. En la proyección Mercator se mantienen la dirección y la forma pero se distorsiona el tamaño a medida que se aleja del Ecuador.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/2021-01-31-hablemos-de-proyecciones/mapa_mercator.png" alt="Proyección de Mercator hecha en R" /> <em>Proyección Mercator hecha en R</em></p><h3 id="mollweide">Mollweide</h3><p>Esta proyección se caracteriza por conservar el área en cualquier lugar del mapa. Fue creada por el matemático Karl Brandan Mollweide en 1805. Algunas de las aplicaciones de esta proyección son los mapas de la Radiación de fondo de microondas o de concentración de químicos en el mar.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/2021-01-31-hablemos-de-proyecciones/mapa_mollweide.png" alt="Proyección de Mollweide hecha en R" /> <em>Proyección Mollweide hecha en R</em></p><h3 id="plate-carrée">Plate Carrée</h3><p>Esta es una proyección equirrectangular, es decir, en la que los meridianos y paralelos se ubican como líneas con igual distancia entre si. Esto implica que no se conserva ni el área ni la forma, pero a pesar de esto, se suele utilizar para mapas temáticos.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/2021-01-31-hablemos-de-proyecciones/mapa_plate_carree.png" alt="Proyección Plate Carrée hecha en R" /> <em>Proyección Plate Carrée hecha en R</em></p><h3 id="aitoff">Aitoff</h3><p>La proyeccción de Aitoff conserva la dirección y la distancia de todos los puntos al centro del mapa, donde se cruza el meridiano de Greenwich y el Ecuador.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/2021-01-31-hablemos-de-proyecciones/mapa_aitoff.png" alt="Proyección Aitoff hecha en R" /> <em>Proyección Aitoff hecha en R</em></p><h3 id="winkel-tripel">Winkel tripel</h3><p>Esta proyección fue propuesta por el cartógrafo Oswald Winkel y tiene la particularidad de ser la media aritmética entre la proyección equirrectangular y la proyección de Aitoff.</p><p>La proyección de Winkle busca minimizar tres tipos de distorsión (de ahí el <em>tripel</em> en su nombre): área, dirección y distancia, y es usada por la National Geographic Society.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/2021-01-31-hablemos-de-proyecciones/mapa_winkel.png" alt="Proyección Winkel tripel hecha en R" /> <em>Proyección Winkel tripel hecha en R</em></p><h2 id="flujo-de-trabajo-en-r">Flujo de trabajo en R</h2><p>Para los mapas anteriores usé un shapefile descargado del repositorio de información geográfica <a href="https://www.geoboundaries.org/index.html#tabs1-js">geoBoundaries</a>, en el que puedes encontrar la información de la división administrativa de muchos países en varias resoluciones. En este caso, yo descargué la información del mundo sólo a nivel de paises, con baja resolución.</p><h3 id="importando-el-mapa">Importando el mapa</h3><p>Como siempre, vamos a importar el shapefile usando la función <code class="language-plaintext highlighter-rouge">st_read()</code>.</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="n">library</span><span class="p">(</span><span class="n">sf</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">rmapshaper</span><span class="p">)</span><span class="w">

</span><span class="n">mapa_base</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sf</span><span class="o">::</span><span class="n">st_read</span><span class="p">(</span><span class="s2">"geoBoundariesCGAZ_ADM0.shp"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
</span><span class="n">rmapshaper</span><span class="o">::</span><span class="n">ms_simplify</span><span class="p">(</span><span class="n">sys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">T</span><span class="p">,</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.01</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
</span><span class="n">sf</span><span class="o">::</span><span class="n">st_as_sf</span><span class="p">()</span><span class="w">
</span></pre></table></code></div></div><p>En el bloque de código anterior hago dos cosas adicionales. En primer lugar, del paquete <code class="language-plaintext highlighter-rouge">dplyr</code> uso el operador <em>pipe</em> para encadenar las salidas de cada linea de código con la entrada de la siguiente. El operador <em>pipe</em> es la secuencia de caracteres <code class="language-plaintext highlighter-rouge">%&gt;%</code>, y si has trabajado con el <code class="language-plaintext highlighter-rouge">tidyverse</code> te será familiar.</p><p>En segundo lugar, uso la función <code class="language-plaintext highlighter-rouge">ms_simplify</code> del paquete <code class="language-plaintext highlighter-rouge">rmapshaper</code> para simplificar las geometrías y disminuir el tiempo que se demora en dibujar cada mapa. Dado que <code class="language-plaintext highlighter-rouge">rmapshaper</code> aún no tiene soporte completo para el paquete <code class="language-plaintext highlighter-rouge">sf</code>, internamente la función lo convierte en un objeto distinto, por lo que al final uso la función <code class="language-plaintext highlighter-rouge">st_as_sf()</code> para que el mapa vuelva a funcionar con <code class="language-plaintext highlighter-rouge">sf</code>.</p><h3 id="funciones-para-trabajar-con-proyecciones">Funciones para trabajar con proyecciones</h3><p>Para estos efectos, hay dos funciones clave. La primera es la función <code class="language-plaintext highlighter-rouge">st_crs()</code>, que permite extraer cuál es el sistema de coordenadas, y por extensión la proyección, del objeto con el que estamos trabajando.</p><p>En general, los sistema de coordenadas que vas a encontrar siguen la nomencluatura “EPSG:XXXX”. La primera parte es por el European Petroleum Survey Group, o EPSG. Esta es una organización que mantiene una base de datos de sistemas de coordenadas geográficas. La segunda parte es el código en dicha base de datos con el que podrás acceder al sistema de coordenadas que necesites.</p><p>Si corremos la siguiente línea de código,</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">sf</span><span class="o">::</span><span class="n">st_crs</span><span class="p">(</span><span class="n">mapa_base</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p>R nos debe devolver que este objeto tiene un ID EPSG de 4326. Puedes consultar más información sobre este y otros sistemas de coordenadas en <a href="https://epsg.io/4326">este link</a>.</p><p>La otra función que nos va a ayudar es <code class="language-plaintext highlighter-rouge">st_transform()</code>. Con esta función, podremos convertir un mapa de un sistema de coordenadas geográficas a otro. Por ejemplo, si quiero convertir el mapa base al sistema EPSG:3116, que es el sistema oficial del Instituto Agustin Codazzi para Colombia, tendría que hacer lo siguiente:</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">mapa_nuevo</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sf</span><span class="o">::</span><span class="n">st_transform</span><span class="p">(</span><span class="n">mapa_base</span><span class="p">,</span><span class="w"> </span><span class="n">crs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">st_crs</span><span class="p">(</span><span class="s2">"EPSG:3116"</span><span class="p">))</span><span class="w">
</span></pre></table></code></div></div><blockquote><p>Nota: esta transformación en particular genera un error al intentar dibujar el mapa. Lo importante es que sepas cómo usar la función <code class="language-plaintext highlighter-rouge">st_transform</code> en caso que lo necesites.</p></blockquote><h3 id="código-para-dibujar-los-mapas">Código para dibujar los mapas</h3><p>Con las dos funciones anteriores, ya tenemos los elementos necesarios para transformar las proyecciones. Acá les dejo el código que usé para dibujar los mapas que aparecen más arriba en el post.</p><div class="language-r highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
</pre><td class="rouge-code"><pre><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tmap</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tmaptools</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">sf</span><span class="p">)</span><span class="w">

</span><span class="n">mapa_base</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sf</span><span class="o">::</span><span class="n">st_read</span><span class="p">(</span><span class="s1">'~/Downloads/World Map/geoBoundariesCGAZ_ADM0.shp'</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">rmapshaper</span><span class="o">::</span><span class="n">ms_simplify</span><span class="p">(</span><span class="n">sys</span><span class="o">=</span><span class="nb">T</span><span class="p">,</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.01</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">st_as_sf</span><span class="p">()</span><span class="w">

</span><span class="c1"># Proyección de Mercator</span><span class="w">
</span><span class="n">mapa_mercator</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sf</span><span class="o">::</span><span class="n">st_transform</span><span class="p">(</span><span class="n">mapa_base</span><span class="p">,</span><span class="w"> </span><span class="n">crs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">st_crs</span><span class="p">(</span><span class="s2">"EPSG:3395"</span><span class="p">))</span><span class="w">

</span><span class="n">tm_shape</span><span class="p">(</span><span class="n">mapa_mercator</span><span class="p">,</span><span class="w"> </span><span class="n">bbox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmaptools</span><span class="o">::</span><span class="n">bb</span><span class="p">(</span><span class="n">mapa_mercator</span><span class="p">,</span><span class="w"> 
                                             </span><span class="n">ylim</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">-15496570.74</span><span class="p">,</span><span class="w"> </span><span class="m">18764656.23</span><span class="p">),</span><span class="w">
                                             </span><span class="n">xlim</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">-20026376.39</span><span class="p">,</span><span class="w"> </span><span class="m">20026376.39</span><span class="p">)))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">tm_polygons</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">tm_graticules</span><span class="p">()</span><span class="w">

</span><span class="c1"># Proyección de Molweide</span><span class="w">
</span><span class="n">mapa_mollweide</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sf</span><span class="o">::</span><span class="n">st_transform</span><span class="p">(</span><span class="n">mapa_base</span><span class="p">,</span><span class="w"> </span><span class="n">crs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">st_crs</span><span class="p">(</span><span class="s2">"ESRI:54009"</span><span class="p">))</span><span class="w">

</span><span class="n">tm_shape</span><span class="p">(</span><span class="n">mapa_mollweide</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">tm_polygons</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">tm_graticules</span><span class="p">()</span><span class="w">

</span><span class="c1"># Proyección Plate Carrée</span><span class="w">
</span><span class="n">mapa_plate_carree</span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sf</span><span class="o">::</span><span class="n">st_transform</span><span class="p">(</span><span class="n">mapa_base</span><span class="p">,</span><span class="w"> </span><span class="n">crs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">st_crs</span><span class="p">(</span><span class="s2">"EPSG:32662"</span><span class="p">))</span><span class="w">

</span><span class="n">tm_shape</span><span class="p">(</span><span class="n">mapa_plate_carree</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">tm_polygons</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">tm_graticules</span><span class="p">()</span><span class="w">

</span><span class="c1"># Proyección Aitoff</span><span class="w">
</span><span class="n">mapa_aitoff</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sf</span><span class="o">::</span><span class="n">st_transform</span><span class="p">(</span><span class="n">mapa_base</span><span class="p">,</span><span class="w"> </span><span class="n">crs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">st_crs</span><span class="p">(</span><span class="s2">"ESRI:54043"</span><span class="p">))</span><span class="w">

</span><span class="n">tm_shape</span><span class="p">(</span><span class="n">mapa_aitoff</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">tm_polygons</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">tm_graticules</span><span class="p">()</span><span class="w">

</span><span class="c1"># Proyección de Winkel tripel</span><span class="w">
</span><span class="n">mapa_winkel</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sf</span><span class="o">::</span><span class="n">st_transform</span><span class="p">(</span><span class="n">mapa_base</span><span class="p">,</span><span class="w"> </span><span class="n">crs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">st_crs</span><span class="p">(</span><span class="s2">"ESRI:54019"</span><span class="p">))</span><span class="w">

</span><span class="n">tm_shape</span><span class="p">(</span><span class="n">mapa_winkel</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">tm_polygons</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">tm_graticules</span><span class="p">()</span><span class="w">
</span></pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/mapas/'>Mapas</a>, <a href='/categories/tutorial/'>Tutorial</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/mapas/" class="post-tag no-text-decoration" >mapas</a> <a href="/tags/r/" class="post-tag no-text-decoration" >r</a> <a href="/tags/leaflet/" class="post-tag no-text-decoration" >leaflet</a> <a href="/tags/sf/" class="post-tag no-text-decoration" >sf</a> <a href="/tags/ggplot/" class="post-tag no-text-decoration" >ggplot</a> <a href="/tags/tmap/" class="post-tag no-text-decoration" >tmap</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Esta publicación está autorizada bajo licencia <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> por el autor.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Hablemos de proyecciones - Camilo Martínez&url=https://camartinezbu.github.io/posts/hablemos-de-proyecciones/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Hablemos de proyecciones - Camilo Martínez&u=https://camartinezbu.github.io/posts/hablemos-de-proyecciones/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://camartinezbu.github.io/posts/hablemos-de-proyecciones/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Actualizaciones recientes</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/mapas-de-calor-como-calendarios-en-R/">Mapas de calor como calendarios en R</a><li><a href="/posts/3-funciones-de-dplyr-que-no-sabias-que-existian/">3 funciones de dplyr que no sabías que existían</a><li><a href="/posts/estructuras-de-datos-basicas-en-python/">Estructuras de datos básicas en python</a><li><a href="/posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/">4 paquetes que debes conocer para hacer mapas en R</a></ul></div><div id="access-tags"> <span>Etiquetas populares</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/r/">r</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/dataviz/">dataviz</a> <a class="post-tag" href="/tags/ggplot/">ggplot</a> <a class="post-tag" href="/tags/leaflet/">leaflet</a> <a class="post-tag" href="/tags/mapas/">mapas</a> <a class="post-tag" href="/tags/sf/">sf</a> <a class="post-tag" href="/tags/tmap/">tmap</a> <a class="post-tag" href="/tags/arrays/">arrays</a> <a class="post-tag" href="/tags/calendar/">calendar</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contenido</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Lecturas relacionadas</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/"><div class="card-body"> <span class="timeago small" > Jan 17 <i class="unloaded">2021-01-17T09:45:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>4 paquetes que debes conocer para hacer mapas en R</h3><div class="text-muted small"><p> Así que decidiste aprender a usar R para trabajar con mapas. Esta guia te dará las herramientas básicas para que puedas hacerlo, incluyas visualizaciones de mapas en tu flujo de trabajo y te motive...</p></div></div></a></div><div class="card"> <a href="/posts/que-son-las-expresiones-regulares/"><div class="card-body"> <span class="timeago small" > Feb 28 <i class="unloaded">2021-02-28T11:30:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>¿Qué son las expresiones regulares?</h3><div class="text-muted small"><p> Los strings son uno de los tipos de datos más comunes que te vas a encontrar en el análisis de datos. Ya sea porque te aparecen en un dataset listo, los consigues a través de ejercicios de webscrap...</p></div></div></a></div><div class="card"> <a href="/posts/como-hacer-un-dashboard-en-r/"><div class="card-body"> <span class="timeago small" > Aug 17, 2020 <i class="unloaded">2020-08-17T12:10:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>¿Cómo hacer un dashboard en R?</h3><div class="text-muted small"><p> Los tableros o dashboards son herramientas muy útiles para extraer conclusiones de los datos, en ocasiones más convenientes que realizar muchas gráficas en excel para luego incluirlas en una presen...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/estructuras-de-datos-basicas-en-python/" class="btn btn-outline-primary"><p>Estructuras de datos básicas en python</p></a> <a href="/posts/que-significa-que-los-datos-esten-ordenados/" class="btn btn-outline-primary"><p>¿Qué significa que los datos estén ordenados?</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="font-italic text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> var options = { scriptUrl: '//camartinezbu.disqus.com/embed.js', disqusConfig: function() { this.page.url = 'https://camartinezbu.github.io/posts/hablemos-de-proyecciones/'; this.page.identifier = '/posts/hablemos-de-proyecciones/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/camartinezbu">Camilo Martinez</a>. <span data-toggle="tooltip" data-placement="top" title="Excepto donde se indique lo contrario, las publicaciones de este blog se encuentran autorizadas por el autor bajo Creative Commons Attribution 4.0 International (CC BY 4.0).">Algunos derechos reservados.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Etiquetas populares</h4><a class="post-tag" href="/tags/r/">r</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/dataviz/">dataviz</a> <a class="post-tag" href="/tags/ggplot/">ggplot</a> <a class="post-tag" href="/tags/leaflet/">leaflet</a> <a class="post-tag" href="/tags/mapas/">mapas</a> <a class="post-tag" href="/tags/sf/">sf</a> <a class="post-tag" href="/tags/tmap/">tmap</a> <a class="post-tag" href="/tags/arrays/">arrays</a> <a class="post-tag" href="/tags/calendar/">calendar</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://camartinezbu.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
